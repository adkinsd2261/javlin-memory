<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MemoryOS - Creative AI Agent Terminal</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        /* Custom CSS for production-ready styling */
        :root {
            --primary-color: #2563eb;
            --primary-dark: #1d4ed8;
            --secondary-color: #f8fafc;
            --accent-color: #06b6d4;
            --text-primary: #1e293b;
            --text-secondary: #64748b;
            --border-color: #e2e8f0;
            --success-color: #10b981;
            --warning-color: #f59e0b;
            --error-color: #ef4444;
            --gradient-bg: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            --terminal-bg: #0f172a;
            --terminal-text: #00ff88;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: var(--gradient-bg);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Navigation */
        .nav {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 0;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--primary-color);
        }

        .logo-icon {
            width: 32px;
            height: 32px;
            background: var(--primary-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-link {
            cursor: pointer;
            padding: 0.5rem 1rem;
            border-radius: 8px;
            transition: all 0.2s;
            font-weight: 500;
        }

        .nav-link:hover {
            background: var(--secondary-color);
            color: var(--primary-color);
        }

        .nav-link.active {
            background: var(--primary-color);
            color: white;
        }

        /* Main Content */
        .main-content {
            min-height: calc(100vh - 80px);
            padding: 2rem 0;
        }

        .section {
            display: none;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        .section.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            background: var(--gradient-bg);
            color: white;
            padding: 4rem 2rem;
            text-align: center;
            border-radius: 12px 12px 0 0;
        }

        .hero h1 {
            font-size: 3rem;
            margin-bottom: 1rem;
            font-weight: 800;
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2rem;
            opacity: 0.9;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 0.75rem 1.5rem;
            border: none;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s;
            text-decoration: none;
            display: inline-block;
        }

        .btn-primary {
            background: var(--accent-color);
            color: white;
        }

        .btn-primary:hover {
            background: #0891b2;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        /* Stats Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            padding: 2rem;
        }

        .stat-card {
            background: white;
            padding: 1.5rem;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .stat-number {
            font-size: 2.5rem;
            font-weight: 700;
            color: var(--primary-color);
            display: block;
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.9rem;
            margin-top: 0.5rem;
        }

        /* Features Grid */
        .features-section {
            padding: 3rem 2rem;
        }

        .features-header {
            text-align: center;
            margin-bottom: 3rem;
        }

        .features-header h2 {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        .features-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 2rem;
        }

        .feature-card {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            border: 1px solid var(--border-color);
            transition: transform 0.2s;
        }

        .feature-card:hover {
            transform: translateY(-5px);
        }

        .feature-icon {
            width: 48px;
            height: 48px;
            background: var(--primary-color);
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
            margin-bottom: 1rem;
        }

        .feature-card h3 {
            margin-bottom: 1rem;
            color: var(--text-primary);
        }

        /* Terminal Interface */
        .terminal-section {
            padding: 2rem;
        }

        .terminal {
            background: var(--terminal-bg);
            border-radius: 12px;
            padding: 1.5rem;
            color: var(--terminal-text);
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            min-height: 400px;
            position: relative;
        }

        .terminal-header {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            margin-bottom: 1rem;
            padding-bottom: 1rem;
            border-bottom: 1px solid #334155;
        }

        .terminal-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
        }

        .terminal-dot.red { background: #ef4444; }
        .terminal-dot.yellow { background: #f59e0b; }
        .terminal-dot.green { background: #10b981; }

        .terminal-title {
            margin-left: 1rem;
            color: #94a3b8;
        }

        .chat-history {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 1rem;
        }

        .chat-message {
            margin: 1rem 0;
            line-height: 1.4;
        }

        .chat-message.user {
            color: #60a5fa;
        }

        .chat-message.ai {
            color: var(--terminal-text);
        }

        .chat-message.system {
            color: #fbbf24;
        }

        .terminal-input {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .terminal-prompt {
            color: var(--terminal-text);
            font-weight: bold;
        }

        .terminal-input input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--terminal-text);
            font-family: inherit;
            font-size: inherit;
            outline: none;
        }

        .terminal-input input::placeholder {
            color: #64748b;
        }

        /* Memory Browser */
        .memory-browser {
            padding: 2rem;
        }

        .memory-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-input {
            padding: 0.5rem 1rem;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: white;
        }

        .memory-list {
            space-y: 1rem;
        }

        .memory-item {
            background: white;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            padding: 1.5rem;
            margin-bottom: 1rem;
        }

        .memory-header {
            display: flex;
            justify-content: space-between;
            align-items: start;
            margin-bottom: 1rem;
        }

        .memory-topic {
            font-weight: 600;
            color: var(--text-primary);
        }

        .memory-timestamp {
            color: var(--text-secondary);
            font-size: 0.875rem;
        }

        .memory-content {
            margin: 1rem 0;
            color: var(--text-secondary);
        }

        .memory-tags {
            display: flex;
            gap: 0.5rem;
            flex-wrap: wrap;
        }

        .memory-tag {
            background: var(--secondary-color);
            color: var(--text-primary);
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-size: 0.75rem;
        }

        /* Onboarding Modal */
        .onboarding-modal {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            padding: 2rem;
        }

        .onboarding-content {
            background: white;
            border-radius: 12px;
            padding: 2rem;
            max-width: 600px;
            width: 100%;
            max-height: 80vh;
            overflow-y: auto;
        }

        .onboarding-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }

        .onboarding-steps {
            margin: 2rem 0;
        }

        .onboarding-step {
            margin: 1rem 0;
            padding: 1rem;
            background: var(--secondary-color);
            border-radius: 8px;
        }

        .onboarding-step h4 {
            margin-bottom: 0.5rem;
            color: var(--primary-color);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .nav-content {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                flex-wrap: wrap;
                justify-content: center;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }

            .features-grid {
                grid-template-columns: 1fr;
            }

            .memory-filters {
                flex-direction: column;
            }
        }

        /* Loading States */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: var(--accent-color);
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Status Indicators */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.25rem 0.75rem;
            border-radius: 20px;
            font-size: 0.875rem;
            font-weight: 500;
        }

        .status-healthy {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success-color);
        }

        .status-degraded {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error-color);
        }
    </style>
</head>
<body x-data="memoryOS()" x-init="init()">
    <!-- Navigation -->
    <nav class="nav">
        <div class="container">
            <div class="nav-content">
                <div class="logo">
                    <div class="logo-icon">M</div>
                    <span>MemoryOS</span>
                </div>
                <ul class="nav-links">
                    <li class="nav-link" :class="{ active: activeSection === 'home' }" @click="setActiveSection('home')">Home</li>
                    <li class="nav-link" :class="{ active: activeSection === 'terminal' }" @click="setActiveSection('terminal')">Terminal</li>
                    <li class="nav-link" :class="{ active: activeSection === 'memory' }" @click="setActiveSection('memory')">Memory</li>
                    <li class="nav-link" :class="{ active: activeSection === 'analytics' }" @click="setActiveSection('analytics')">Analytics</li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Home Section -->
            <section class="section" :class="{ active: activeSection === 'home' }">
                <div class="hero">
                    <h1>Creative AI Agent Terminal</h1>
                    <p>Your persistent AI companion for deep work, creative projects, and intelligent automation</p>
                    <div class="cta-buttons">
                        <button class="btn btn-primary" @click="setActiveSection('terminal')">Start Creating</button>
                        <button class="btn btn-secondary" @click="showOnboarding = true">Learn More</button>
                    </div>
                </div>

                <!-- Live Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <span class="stat-number" x-text="totalMemories">0</span>
                        <span class="stat-label">Creative Memories</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" x-text="successRate">0%</span>
                        <span class="stat-label">Success Rate</span>
                    </div>
                    <div class="stat-card">
                        <span class="stat-number" x-text="daysSince">0</span>
                        <span class="stat-label">Days Creating</span>
                    </div>
                    <div class="stat-card">
                        <div class="status-indicator" :class="systemStatus === 'healthy' ? 'status-healthy' : 'status-error'">
                            <span x-text="systemStatus">checking...</span>
                        </div>
                        <span class="stat-label">System Status</span>
                    </div>
                </div>

                <!-- Features -->
                <div class="features-section">
                    <div class="features-header">
                        <h2>Built for Creative Minds</h2>
                        <p>Everything you need to transform ideas into reality with AI assistance</p>
                    </div>
                    <div class="features-grid">
                        <div class="feature-card">
                            <div class="feature-icon">üß†</div>
                            <h3>Persistent Memory</h3>
                            <p>Your AI remembers every conversation, insight, and creative breakthrough across all sessions.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">‚ö°</div>
                            <h3>Instant Context</h3>
                            <p>Jump into any project with full context - no need to re-explain your vision or progress.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üé®</div>
                            <h3>Creative Workflows</h3>
                            <p>Optimized for brainstorming, ideation, writing, coding, and complex problem-solving.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üîó</div>
                            <h3>API Integration</h3>
                            <p>Connect with your favorite tools and automate repetitive tasks in your creative process.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üìà</div>
                            <h3>Progress Tracking</h3>
                            <p>Visualize your creative journey with intelligent analytics and insights.</p>
                        </div>
                        <div class="feature-card">
                            <div class="feature-icon">üõ°Ô∏è</div>
                            <h3>Bulletproof Reliability</h3>
                            <p>Enterprise-grade reliability ensures your creative work is never lost.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Terminal Section -->
            <section class="section" :class="{ active: activeSection === 'terminal' }">
                <div class="terminal-section">
                    <div class="terminal">
                        <div class="terminal-header">
                            <div class="terminal-dot red"></div>
                            <div class="terminal-dot yellow"></div>
                            <div class="terminal-dot green"></div>
                            <div class="terminal-title">MemoryOS Creative Terminal</div>
                        </div>

                        <div class="chat-history" x-ref="chatHistory">
                            <template x-for="message in chatHistory" :key="message.id">
                                <div class="chat-message" :class="message.type">
                                    <span x-text="message.content"></span>
                                </div>
                            </template>
                        </div>

                        <div class="terminal-input">
                            <span class="terminal-prompt">‚ùØ</span>
                            <input 
                                x-model="currentMessage" 
                                @keydown.enter="sendMessage()"
                                :disabled="isTyping"
                                placeholder="Ask me anything about your creative projects..."
                                autofocus
                            >
                            <div x-show="isTyping" class="loading"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Memory Browser Section -->
            <section class="section" :class="{ active: activeSection === 'memory' }">
                <div class="memory-browser">
                    <h2>Memory Archive</h2>
                    <p>Browse and search through your creative journey</p>

                    <div class="memory-filters">
                        <input class="filter-input" placeholder="Search memories..." x-model="memorySearch">
                        <select class="filter-input" x-model="selectedCategory">
                            <option value="">All Categories</option>
                            <template x-for="(count, category) in categories" :key="category">
                                <option :value="category" x-text="`${category} (${count})`"></option>
                            </template>
                        </select>
                    </div>

                    <div class="memory-list">
                        <template x-for="memory in filteredMemories" :key="memory.timestamp">
                            <div class="memory-item">
                                <div class="memory-header">
                                    <div class="memory-topic" x-text="memory.topic"></div>
                                    <div class="memory-timestamp" x-text="formatTimestamp(memory.timestamp)"></div>
                                </div>
                                <div class="memory-content" x-text="memory.input.substring(0, 200) + '...'"></div>
                                <div class="memory-tags">
                                    <template x-for="tag in memory.tags || []">
                                        <span class="memory-tag" x-text="tag"></span>
                                    </template>
                                    <span class="memory-tag" x-text="memory.category"></span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section class="section" :class="{ active: activeSection === 'analytics' }">
                <div style="padding: 2rem;">
                    <h2>Creative Analytics</h2>
                    <p>Insights into your creative process and AI collaboration</p>

                    <div class="stats-grid" style="margin-top: 2rem;">
                        <div class="stat-card">
                            <span class="stat-number" x-text="Object.keys(categories).length">0</span>
                            <span class="stat-label">Active Categories</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" x-text="aiProvider">Unknown</span>
                            <span class="stat-label">AI Provider</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" x-text="sessionId.substring(0, 8)">--------</span>
                            <span class="stat-label">Session ID</span>
                        </div>
                        <div class="stat-card">
                            <span class="stat-number" x-text="recentMemories.length">0</span>
                            <span class="stat-label">Recent Entries</span>
                        </div>
                    </div>

                    <div style="margin-top: 3rem;">
                        <h3>Category Breakdown</h3>
                        <div style="margin-top: 1rem;">
                            <template x-for="(count, category) in categories" :key="category">
                                <div style="display: flex; justify-content: space-between; padding: 0.5rem 0; border-bottom: 1px solid var(--border-color);">
                                    <span x-text="category"></span>
                                    <span x-text="count"></span>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <!-- Onboarding Modal -->
    <div x-show="showOnboarding" class="onboarding-modal" x-transition>
        <div class="onboarding-content">
            <div class="onboarding-header">
                <h3>Welcome to MemoryOS Creative Terminal</h3>
                <button @click="showOnboarding = false" style="background: none; border: none; color: var(--text-secondary); cursor: pointer; font-size: 1.5rem;">&times;</button>
            </div>

            <p>MemoryOS is your creative AI companion that never forgets. Here's how to get started:</p>

            <div class="onboarding-steps">
                <div class="onboarding-step">
                    <h4>1. Start a Creative Session</h4>
                    <p>Click on the Terminal tab and begin chatting with your AI assistant about any creative project, problem, or idea.</p>
                </div>

                <div class="onboarding-step">
                    <h4>2. Build Persistent Context</h4>
                    <p>Every conversation is remembered. Your AI learns your preferences, project details, and creative style over time.</p>
                </div>

                <div class="onboarding-step">
                    <h4>3. Explore Your Memory</h4>
                    <p>Browse your Memory Archive to revisit past insights, track progress, and find inspiration from previous sessions.</p>
                </div>

                <div class="onboarding-step">
                    <h4>4. Analyze Your Journey</h4>
                    <p>Use Analytics to understand your creative patterns and see how your collaboration with AI evolves.</p>
                </div>
            </div>

            <div style="text-align: center; margin-top: 2rem;">
                <button class="btn btn-primary" @click="showOnboarding = false; setActiveSection('terminal')">Start Creating Now</button>
            </div>
        </div>
    </div>

    <script>
        function memoryOS() {
            return {
                // State
                activeSection: 'home',
                showOnboarding: false,

                // Chat
                currentMessage: '',
                chatHistory: [],
                isTyping: false,

                // System
                systemStatus: 'checking...',
                totalMemories: 0,
                successRate: '0%',
                recentMemories: [],
                categories: {},
                aiProvider: 'Unknown',
                sessionId: '',
                daysSince: 0,

                // Memory browsing
                memorySearch: '',
                selectedCategory: '',

                // Initialize
                async init() {
                    await this.loadSystemStatus();
                    await this.refreshMemories();
                    this.addWelcomeMessage();
                    this.calculateDaysSince();

                    // Show onboarding for first-time users
                    const hasVisited = localStorage.getItem('memoryos-visited');
                    if (!hasVisited) {
                        this.showOnboarding = true;
                        localStorage.setItem('memoryos-visited', 'true');
                    }
                },

                // Navigation
                setActiveSection(section) {
                    this.activeSection = section;
                    if (section === 'memory') {
                        this.refreshMemories();
                    }
                },

                // System Status
                async loadSystemStatus() {
                    try {
                        const [healthResponse, contextResponse] = await Promise.all([
                            fetch('/health'),
                            fetch('/ai/context').catch(() => null)
                        ]);

                        const health = await healthResponse.json();
                        this.systemStatus = health.status || 'unknown';

                        if (contextResponse && contextResponse.ok) {
                            const context = await contextResponse.json();
                            this.aiProvider = context.ai_provider || 'Unknown';
                            this.sessionId = context.session_id || '';
                        }
                    } catch (error) {
                        this.systemStatus = 'error';
                        console.error('Failed to load system status:', error);
                    }
                },

                // Memory Management
                async refreshMemories() {
                    try {
                        const [memoriesResponse, statsResponse] = await Promise.all([
                            fetch('/memory?limit=50'),
                            fetch('/stats')
                        ]);

                        const memories = await memoriesResponse.json();
                        const stats = await statsResponse.json();

                        this.recentMemories = memories.memories || [];
                        this.totalMemories = stats.total_memories || 0;
                        this.successRate = stats.success_rate || '0%';
                        this.categories = stats.categories || {};
                    } catch (error) {
                        console.error('Failed to refresh memories:', error);
                    }
                },

                // Chat Functions
                addWelcomeMessage() {
                    this.chatHistory.push({
                        id: Date.now(),
                        type: 'system',
                        content: `üöÄ MemoryOS Creative Terminal initialized. Status: ${this.systemStatus}. Ready for creative collaboration!`
                    });
                    this.scrollToBottom();
                },

                async sendMessage() {
                    if (!this.currentMessage.trim() || this.isTyping) return;

                    const userMessage = this.currentMessage.trim();
                    this.chatHistory.push({
                        id: Date.now(),
                        type: 'user',
                        content: userMessage
                    });

                    this.currentMessage = '';
                    this.isTyping = true;
                    this.scrollToBottom();

                    try {
                        const response = await fetch('/ai/query', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ input: userMessage })
                        });

                        const result = await response.json();

                        if (result.status === 'success') {
                            this.chatHistory.push({
                                id: Date.now() + 1,
                                type: 'ai',
                                content: result.ai_response.response || 'No response received'
                            });
                        } else {
                            this.chatHistory.push({
                                id: Date.now() + 1,
                                type: 'system',
                                content: `Error: ${result.error || 'Unknown error occurred'}`
                            });
                        }
                    } catch (error) {
                        this.chatHistory.push({
                            id: Date.now() + 1,
                            type: 'system',
                            content: `Connection error: ${error.message}`
                        });
                    } finally {
                        this.isTyping = false;
                        this.scrollToBottom();
                        this.refreshMemories();
                    }
                },

                scrollToBottom() {
                    this.$nextTick(() => {
                        if (this.$refs.chatHistory) {
                            this.$refs.chatHistory.scrollTop = this.$refs.chatHistory.scrollHeight;
                        }
                    });
                },

                // Utility Functions
                calculateDaysSince() {
                    const startDate = new Date('2025-01-01');
                    const today = new Date();
                    this.daysSince = Math.floor((today - startDate) / (1000 * 60 * 60 * 24));
                },

                formatTimestamp(timestamp) {
                    return new Date(timestamp).toLocaleDateString('en-US', {
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                },

                // Computed Properties
                get filteredMemories() {
                    let filtered = this.recentMemories;

                    if (this.memorySearch) {
                        const search = this.memorySearch.toLowerCase();
                        filtered = filtered.filter(memory => 
                            memory.topic?.toLowerCase().includes(search) ||
                            memory.input?.toLowerCase().includes(search) ||
                            memory.output?.toLowerCase().includes(search)
                        );
                    }

                    if (this.selectedCategory) {
                        filtered = filtered.filter(memory => 
                            memory.category === this.selectedCategory
                        );
                    }

                    return filtered;
                }
            }
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MemoryOS - AI-Powered Memory System</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }
        
        .memory-card {
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
        }
        
        .memory-card:hover {
            transform: translateY(-2px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        
        .nav-link {
            transition: all 0.2s ease;
        }
        
        .nav-link:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-1px);
        }
        
        .status-indicator {
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        .loading-spinner {
            border: 2px solid #f3f3f3;
            border-top: 2px solid #667eea;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body x-data="memoryOSApp()" x-init="init()">
    <!-- Navigation -->
    <nav class="glass-effect fixed top-0 left-0 right-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo -->
                <div class="flex items-center space-x-3">
                    <div class="w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-lg flex items-center justify-center">
                        <i class="fas fa-brain text-white text-sm"></i>
                    </div>
                    <span class="text-white font-bold text-xl">MemoryOS</span>
                    <span class="text-white/70 text-sm" x-text="systemStatus.status"></span>
                </div>
                
                <!-- Navigation Links -->
                <div class="hidden md:flex items-center space-x-1">
                    <button @click="currentView = 'dashboard'" 
                            :class="currentView === 'dashboard' ? 'bg-white/20' : ''"
                            class="nav-link px-4 py-2 rounded-lg text-white font-medium">
                        <i class="fas fa-tachometer-alt mr-2"></i>Dashboard
                    </button>
                    <button @click="currentView = 'memories'" 
                            :class="currentView === 'memories' ? 'bg-white/20' : ''"
                            class="nav-link px-4 py-2 rounded-lg text-white font-medium">
                        <i class="fas fa-memory mr-2"></i>Memories
                    </button>
                    <button @click="currentView = 'timeline'" 
                            :class="currentView === 'timeline' ? 'bg-white/20' : ''"
                            class="nav-link px-4 py-2 rounded-lg text-white font-medium">
                        <i class="fas fa-history mr-2"></i>Timeline
                    </button>
                    <button @click="currentView = 'analytics'" 
                            :class="currentView === 'analytics' ? 'bg-white/20' : ''"
                            class="nav-link px-4 py-2 rounded-lg text-white font-medium">
                        <i class="fas fa-chart-bar mr-2"></i>Analytics
                    </button>
                    <button @click="currentView = 'api'" 
                            :class="currentView === 'api' ? 'bg-white/20' : ''"
                            class="nav-link px-4 py-2 rounded-lg text-white font-medium">
                        <i class="fas fa-code mr-2"></i>API
                    </button>
                    <button @click="currentView = 'settings'" 
                            :class="currentView === 'settings' ? 'bg-white/20' : ''"
                            class="nav-link px-4 py-2 rounded-lg text-white font-medium">
                        <i class="fas fa-cog mr-2"></i>Settings
                    </button>
                </div>
                
                <!-- System Status -->
                <div class="flex items-center space-x-3">
                    <div class="flex items-center space-x-2">
                        <div :class="systemStatus.status === 'healthy' ? 'bg-green-400' : 'bg-red-400'" 
                             class="w-2 h-2 rounded-full status-indicator"></div>
                        <span class="text-white text-sm" x-text="systemStatus.status || 'checking...'"></span>
                    </div>
                    <button @click="refreshData()" class="text-white hover:text-gray-200">
                        <i class="fas fa-sync-alt" :class="loading ? 'animate-spin' : ''"></i>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-16 min-h-screen">
        <!-- Dashboard View -->
        <div x-show="currentView === 'dashboard'" class="fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <!-- Header -->
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">MemoryOS Dashboard</h1>
                    <p class="text-white/80">Bulletproof minimal memory system with comprehensive monitoring</p>
                </div>
                
                <!-- Stats Cards -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">Total Memories</p>
                                <p class="text-2xl font-bold text-gray-900" x-text="stats.total_memories || '0'"></p>
                            </div>
                            <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-database text-blue-600"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">Success Rate</p>
                                <p class="text-2xl font-bold text-gray-900" x-text="stats.success_rate || '0%'"></p>
                            </div>
                            <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-check-circle text-green-600"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">Response Time</p>
                                <p class="text-2xl font-bold text-gray-900" x-text="systemStatus.response_time_ms ? systemStatus.response_time_ms + 'ms' : 'N/A'"></p>
                            </div>
                            <div class="w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-tachometer-alt text-purple-600"></i>
                            </div>
                        </div>
                    </div>
                    
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <p class="text-gray-600 text-sm font-medium">System Health</p>
                                <p class="text-2xl font-bold" 
                                   :class="systemStatus.status === 'healthy' ? 'text-green-600' : 'text-red-600'"
                                   x-text="systemStatus.status || 'Unknown'"></p>
                            </div>
                            <div class="w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center">
                                <i class="fas fa-heartbeat text-orange-600"></i>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Recent Activity -->
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <div class="memory-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Recent Memories</h3>
                        <div class="space-y-3" x-show="memories.length > 0">
                            <template x-for="memory in memories.slice(0, 5)" :key="memory.timestamp">
                                <div class="flex items-start space-x-3 p-3 bg-gray-50 rounded-lg">
                                    <div class="w-2 h-2 rounded-full mt-2" 
                                         :class="memory.success ? 'bg-green-400' : 'bg-red-400'"></div>
                                    <div class="flex-1 min-w-0">
                                        <p class="text-sm font-medium text-gray-900" x-text="memory.topic"></p>
                                        <p class="text-xs text-gray-500" x-text="memory.type + ' • ' + memory.category"></p>
                                    </div>
                                </div>
                            </template>
                        </div>
                        <div x-show="memories.length === 0" class="text-center py-8 text-gray-500">
                            <i class="fas fa-inbox text-3xl mb-2"></i>
                            <p>No memories yet</p>
                        </div>
                    </div>
                    
                    <div class="memory-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">System Status</h3>
                        <div class="space-y-3">
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Memory File</span>
                                <span :class="systemStatus.checks?.memory_file_accessible ? 'text-green-600' : 'text-red-600'" 
                                      class="text-sm font-medium">
                                    <i :class="systemStatus.checks?.memory_file_accessible ? 'fas fa-check' : 'fas fa-times'"></i>
                                    <span x-text="systemStatus.checks?.memory_file_accessible ? 'Accessible' : 'Error'"></span>
                                </span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Write Access</span>
                                <span :class="systemStatus.checks?.memory_file_writable ? 'text-green-600' : 'text-red-600'" 
                                      class="text-sm font-medium">
                                    <i :class="systemStatus.checks?.memory_file_writable ? 'fas fa-check' : 'fas fa-times'"></i>
                                    <span x-text="systemStatus.checks?.memory_file_writable ? 'Available' : 'Error'"></span>
                                </span>
                            </div>
                            <div class="flex items-center justify-between">
                                <span class="text-sm text-gray-600">Response Time</span>
                                <span :class="systemStatus.checks?.response_time_ok ? 'text-green-600' : 'text-red-600'" 
                                      class="text-sm font-medium">
                                    <i :class="systemStatus.checks?.response_time_ok ? 'fas fa-check' : 'fas fa-times'"></i>
                                    <span x-text="systemStatus.checks?.response_time_ok ? 'Good' : 'Slow'"></span>
                                </span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Memories View -->
        <div x-show="currentView === 'memories'" class="fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="flex items-center justify-between mb-8">
                    <div>
                        <h1 class="text-3xl font-bold text-white mb-2">Memory Management</h1>
                        <p class="text-white/80">View, search, and manage your memory entries</p>
                    </div>
                    <button @click="showAddMemory = true" 
                            class="bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg font-medium transition-colors">
                        <i class="fas fa-plus mr-2"></i>Add Memory
                    </button>
                </div>
                
                <!-- Search and Filters -->
                <div class="memory-card rounded-xl p-6 mb-6">
                    <div class="grid grid-cols-1 md:grid-cols-4 gap-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Search</label>
                            <input type="text" x-model="searchQuery" @input="filterMemories()" 
                                   placeholder="Search memories..." 
                                   class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
                            <select x-model="filterType" @change="filterMemories()" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">All Types</option>
                                <option value="SystemUpdate">System Update</option>
                                <option value="Feature">Feature</option>
                                <option value="BugFix">Bug Fix</option>
                                <option value="Interaction">Interaction</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                            <select x-model="filterCategory" @change="filterMemories()" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">All Categories</option>
                                <option value="system">System</option>
                                <option value="feature">Feature</option>
                                <option value="bug">Bug</option>
                                <option value="ai_interaction">AI Interaction</option>
                            </select>
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                            <select x-model="filterSuccess" @change="filterMemories()" 
                                    class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <option value="">All</option>
                                <option value="true">Success</option>
                                <option value="false">Failed</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Memory List -->
                <div class="space-y-4">
                    <template x-for="memory in filteredMemories" :key="memory.timestamp">
                        <div class="memory-card rounded-xl p-6">
                            <div class="flex items-start justify-between mb-4">
                                <div class="flex items-start space-x-4">
                                    <div class="w-3 h-3 rounded-full mt-1" 
                                         :class="memory.success ? 'bg-green-400' : 'bg-red-400'"></div>
                                    <div>
                                        <h3 class="text-lg font-semibold text-gray-900" x-text="memory.topic"></h3>
                                        <div class="flex items-center space-x-3 text-sm text-gray-500 mt-1">
                                            <span x-text="memory.type"></span>
                                            <span>•</span>
                                            <span x-text="memory.category"></span>
                                            <span>•</span>
                                            <span x-text="formatDate(memory.timestamp)"></span>
                                        </div>
                                    </div>
                                </div>
                                <div class="flex items-center space-x-2">
                                    <span :class="memory.success ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'" 
                                          class="px-2 py-1 rounded-full text-xs font-medium">
                                        <span x-text="memory.success ? 'Success' : 'Failed'"></span>
                                    </span>
                                </div>
                            </div>
                            
                            <div class="space-y-3">
                                <div x-show="memory.input">
                                    <h4 class="text-sm font-medium text-gray-700">Input:</h4>
                                    <p class="text-sm text-gray-600 bg-gray-50 p-3 rounded-lg" x-text="memory.input"></p>
                                </div>
                                <div x-show="memory.output">
                                    <h4 class="text-sm font-medium text-gray-700">Output:</h4>
                                    <p class="text-sm text-gray-600 bg-gray-50 p-3 rounded-lg" x-text="memory.output"></p>
                                </div>
                            </div>
                            
                            <div class="flex items-center justify-between mt-4 pt-4 border-t border-gray-100">
                                <div class="flex items-center space-x-4">
                                    <span class="text-xs text-gray-500" x-show="memory.score">
                                        Score: <span x-text="memory.score"></span>/<span x-text="memory.maxScore || 25"></span>
                                    </span>
                                    <div x-show="memory.tags && memory.tags.length > 0" class="flex items-center space-x-1">
                                        <template x-for="tag in memory.tags.slice(0, 3)" :key="tag">
                                            <span class="px-2 py-1 bg-gray-100 text-gray-600 rounded text-xs" x-text="'#' + tag"></span>
                                        </template>
                                    </div>
                                </div>
                                <button class="text-gray-400 hover:text-gray-600">
                                    <i class="fas fa-ellipsis-h"></i>
                                </button>
                            </div>
                        </div>
                    </template>
                </div>
                
                <div x-show="filteredMemories.length === 0" class="text-center py-12">
                    <div class="memory-card rounded-xl p-8">
                        <i class="fas fa-search text-4xl text-gray-400 mb-4"></i>
                        <h3 class="text-lg font-medium text-gray-900 mb-2">No memories found</h3>
                        <p class="text-gray-500">Try adjusting your search criteria or add a new memory.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline View -->
        <div x-show="currentView === 'timeline'" class="fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">Memory Timeline</h1>
                    <p class="text-white/80">Chronological view of your memory entries</p>
                </div>
                
                <div class="memory-card rounded-xl p-6">
                    <div class="space-y-6">
                        <template x-for="(memory, index) in memories" :key="memory.timestamp">
                            <div class="relative">
                                <!-- Timeline line -->
                                <div x-show="index !== memories.length - 1" 
                                     class="absolute left-4 top-8 w-0.5 h-full bg-gray-200"></div>
                                
                                <!-- Timeline dot -->
                                <div class="absolute left-2 top-2 w-4 h-4 rounded-full border-2 border-white"
                                     :class="memory.success ? 'bg-green-400' : 'bg-red-400'"></div>
                                
                                <!-- Content -->
                                <div class="ml-10">
                                    <div class="bg-gray-50 rounded-lg p-4">
                                        <div class="flex items-start justify-between mb-2">
                                            <h3 class="font-medium text-gray-900" x-text="memory.topic"></h3>
                                            <span class="text-xs text-gray-500" x-text="formatDate(memory.timestamp)"></span>
                                        </div>
                                        <div class="flex items-center space-x-2 mb-2">
                                            <span class="px-2 py-1 bg-blue-100 text-blue-800 rounded text-xs" x-text="memory.type"></span>
                                            <span class="px-2 py-1 bg-gray-100 text-gray-800 rounded text-xs" x-text="memory.category"></span>
                                        </div>
                                        <p class="text-sm text-gray-600" x-text="memory.output"></p>
                                    </div>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </div>
        </div>

        <!-- Analytics View -->
        <div x-show="currentView === 'analytics'" class="fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">Analytics & Insights</h1>
                    <p class="text-white/80">Detailed analysis of your memory system performance</p>
                </div>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                    <!-- Categories Chart -->
                    <div class="memory-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Memory Categories</h3>
                        <div class="space-y-3">
                            <template x-for="[category, count] in Object.entries(stats.categories || {})" :key="category">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600 capitalize" x-text="category"></span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-20 h-2 bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-purple-500 rounded-full" 
                                                 :style="`width: ${(count / Math.max(...Object.values(stats.categories || {}))) * 100}%`"></div>
                                        </div>
                                        <span class="text-sm font-medium text-gray-900" x-text="count"></span>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                    
                    <!-- Types Chart -->
                    <div class="memory-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Memory Types</h3>
                        <div class="space-y-3">
                            <template x-for="[type, count] in Object.entries(stats.types || {})" :key="type">
                                <div class="flex items-center justify-between">
                                    <span class="text-sm text-gray-600" x-text="type"></span>
                                    <div class="flex items-center space-x-2">
                                        <div class="w-20 h-2 bg-gray-200 rounded-full overflow-hidden">
                                            <div class="h-full bg-blue-500 rounded-full" 
                                                 :style="`width: ${(count / Math.max(...Object.values(stats.types || {}))) * 100}%`"></div>
                                        </div>
                                        <span class="text-sm font-medium text-gray-900" x-text="count"></span>
                                    </div>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
                
                <!-- Performance Metrics -->
                <div class="memory-card rounded-xl p-6 mt-8">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Performance Metrics</h3>
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                        <div class="text-center">
                            <div class="text-2xl font-bold text-purple-600" x-text="stats.successful_entries || 0"></div>
                            <div class="text-sm text-gray-600">Successful Entries</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-red-600" x-text="stats.failed_entries || 0"></div>
                            <div class="text-sm text-gray-600">Failed Entries</div>
                        </div>
                        <div class="text-center">
                            <div class="text-2xl font-bold text-green-600" x-text="stats.success_rate || '0%'"></div>
                            <div class="text-sm text-gray-600">Success Rate</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- API View -->
        <div x-show="currentView === 'api'" class="fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">API Documentation</h1>
                    <p class="text-white/80">Test and explore the MemoryOS API endpoints</p>
                </div>
                
                <!-- API Endpoints -->
                <div class="space-y-6">
                    <!-- Health Endpoint -->
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">GET /health</h3>
                                <p class="text-sm text-gray-600">System health check endpoint</p>
                            </div>
                            <button @click="testEndpoint('/health')" 
                                    class="bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg text-sm font-medium">
                                Test
                            </button>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <pre class="text-sm text-gray-800">curl -X GET /health</pre>
                        </div>
                    </div>
                    
                    <!-- Memory GET -->
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">GET /memory</h3>
                                <p class="text-sm text-gray-600">Retrieve memory entries with pagination</p>
                            </div>
                            <button @click="testEndpoint('/memory')" 
                                    class="bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-medium">
                                Test
                            </button>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <pre class="text-sm text-gray-800">curl -X GET /memory?page=1&limit=10</pre>
                        </div>
                    </div>
                    
                    <!-- Memory POST -->
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">POST /memory</h3>
                                <p class="text-sm text-gray-600">Create a new memory entry (requires API key)</p>
                            </div>
                            <button @click="showApiTest = true" 
                                    class="bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded-lg text-sm font-medium">
                                Test
                            </button>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <pre class="text-sm text-gray-800">curl -X POST /memory \
  -H "X-API-KEY: your-api-key" \
  -H "Content-Type: application/json" \
  -d '{
    "topic": "Test Memory",
    "type": "SystemTest",
    "input": "Testing API",
    "output": "Success",
    "success": true,
    "category": "test"
  }'</pre>
                        </div>
                    </div>
                    
                    <!-- Stats Endpoint -->
                    <div class="memory-card rounded-xl p-6">
                        <div class="flex items-center justify-between mb-4">
                            <div>
                                <h3 class="text-lg font-semibold text-gray-900">GET /stats</h3>
                                <p class="text-sm text-gray-600">Get memory statistics and analytics</p>
                            </div>
                            <button @click="testEndpoint('/stats')" 
                                    class="bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-medium">
                                Test
                            </button>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-4">
                            <pre class="text-sm text-gray-800">curl -X GET /stats</pre>
                        </div>
                    </div>
                </div>
                
                <!-- API Test Results -->
                <div x-show="apiTestResult" class="memory-card rounded-xl p-6 mt-6">
                    <h3 class="text-lg font-semibold text-gray-900 mb-4">Test Result</h3>
                    <div class="bg-gray-900 rounded-lg p-4 overflow-x-auto">
                        <pre class="text-green-400 text-sm" x-text="apiTestResult"></pre>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings View -->
        <div x-show="currentView === 'settings'" class="fade-in">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
                <div class="mb-8">
                    <h1 class="text-3xl font-bold text-white mb-2">Settings</h1>
                    <p class="text-white/80">Configure your MemoryOS system</p>
                </div>
                
                <div class="space-y-6">
                    <!-- API Configuration -->
                    <div class="memory-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">API Configuration</h3>
                        <div class="space-y-4">
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                                <input type="password" x-model="apiKey" 
                                       placeholder="Enter your API key" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                                <p class="text-xs text-gray-500 mt-1">Required for creating new memory entries</p>
                            </div>
                            <div>
                                <label class="block text-sm font-medium text-gray-700 mb-2">Base URL</label>
                                <input type="text" x-model="baseUrl" 
                                       placeholder="http://localhost:5000" 
                                       class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            </div>
                        </div>
                    </div>
                    
                    <!-- System Information -->
                    <div class="memory-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">System Information</h3>
                        <div class="space-y-3">
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Version</span>
                                <span class="text-sm font-medium text-gray-900">2.0.0</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Service</span>
                                <span class="text-sm font-medium text-gray-900">MemoryOS-Clean</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Last Updated</span>
                                <span class="text-sm font-medium text-gray-900" x-text="formatDate(systemStatus.timestamp)"></span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Actions -->
                    <div class="memory-card rounded-xl p-6">
                        <h3 class="text-lg font-semibold text-gray-900 mb-4">Actions</h3>
                        <div class="space-y-3">
                            <button @click="refreshData()" 
                                    class="w-full bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-sync-alt mr-2"></i>Refresh All Data
                            </button>
                            <button @click="exportData()" 
                                    class="w-full bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-download mr-2"></i>Export Memory Data
                            </button>
                            <button @click="clearCache()" 
                                    class="w-full bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg font-medium">
                                <i class="fas fa-trash mr-2"></i>Clear Cache
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Add Memory Modal -->
    <div x-show="showAddMemory" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" 
         x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" 
         x-transition:enter-end="opacity-100">
        <div class="bg-white rounded-xl p-6 w-full max-w-md mx-4" 
             x-transition:enter="transition ease-out duration-300" 
             x-transition:enter-start="opacity-0 transform scale-95" 
             x-transition:enter-end="opacity-100 transform scale-100">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Add New Memory</h3>
            <form @submit.prevent="addMemory()">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Topic</label>
                        <input type="text" x-model="newMemory.topic" required 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Type</label>
                        <select x-model="newMemory.type" required 
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">Select Type</option>
                            <option value="SystemUpdate">System Update</option>
                            <option value="Feature">Feature</option>
                            <option value="BugFix">Bug Fix</option>
                            <option value="Interaction">Interaction</option>
                            <option value="Note">Note</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Category</label>
                        <select x-model="newMemory.category" required 
                                class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                            <option value="">Select Category</option>
                            <option value="system">System</option>
                            <option value="feature">Feature</option>
                            <option value="bug">Bug</option>
                            <option value="test">Test</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Input</label>
                        <textarea x-model="newMemory.input" rows="3" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Output</label>
                        <textarea x-model="newMemory.output" rows="3" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent"></textarea>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" x-model="newMemory.success" id="success" 
                               class="h-4 w-4 text-purple-600 focus:ring-purple-500 border-gray-300 rounded">
                        <label for="success" class="ml-2 block text-sm text-gray-900">Success</label>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" @click="showAddMemory = false" 
                            class="px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg font-medium">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium">
                        Add Memory
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- API Test Modal -->
    <div x-show="showApiTest" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50" 
         x-transition:enter="transition ease-out duration-300" 
         x-transition:enter-start="opacity-0" 
         x-transition:enter-end="opacity-100">
        <div class="bg-white rounded-xl p-6 w-full max-w-lg mx-4" 
             x-transition:enter="transition ease-out duration-300" 
             x-transition:enter-start="opacity-0 transform scale-95" 
             x-transition:enter-end="opacity-100 transform scale-100">
            <h3 class="text-lg font-semibold text-gray-900 mb-4">Test POST /memory</h3>
            <form @submit.prevent="testPostMemory()">
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">API Key</label>
                        <input type="text" x-model="testApiKey" required 
                               placeholder="Enter API key" 
                               class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">JSON Payload</label>
                        <textarea x-model="testPayload" rows="8" 
                                  class="w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent font-mono text-sm"></textarea>
                    </div>
                </div>
                <div class="flex justify-end space-x-3 mt-6">
                    <button type="button" @click="showApiTest = false" 
                            class="px-4 py-2 text-gray-700 bg-gray-200 hover:bg-gray-300 rounded-lg font-medium">
                        Cancel
                    </button>
                    <button type="submit" 
                            class="px-4 py-2 bg-purple-500 hover:bg-purple-600 text-white rounded-lg font-medium">
                        Test API
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        function memoryOSApp() {
            return {
                currentView: 'dashboard',
                loading: false,
                systemStatus: {},
                stats: {},
                memories: [],
                filteredMemories: [],
                searchQuery: '',
                filterType: '',
                filterCategory: '',
                filterSuccess: '',
                showAddMemory: false,
                showApiTest: false,
                apiTestResult: '',
                baseUrl: window.location.origin,
                apiKey: '',
                testApiKey: '',
                testPayload: JSON.stringify({
                    "topic": "Test Memory Entry",
                    "type": "SystemTest",
                    "input": "Testing API endpoint",
                    "output": "API test successful",
                    "success": true,
                    "category": "test"
                }, null, 2),
                newMemory: {
                    topic: '',
                    type: '',
                    category: '',
                    input: '',
                    output: '',
                    success: true
                },

                async init() {
                    await this.refreshData();
                    // Auto-refresh every 30 seconds
                    setInterval(() => {
                        this.refreshSystemStatus();
                    }, 30000);
                },

                async refreshData() {
                    this.loading = true;
                    try {
                        await Promise.all([
                            this.refreshSystemStatus(),
                            this.refreshStats(),
                            this.refreshMemories()
                        ]);
                    } catch (error) {
                        console.error('Error refreshing data:', error);
                    } finally {
                        this.loading = false;
                    }
                },

                async refreshSystemStatus() {
                    try {
                        const response = await fetch(`${this.baseUrl}/health`);
                        this.systemStatus = await response.json();
                    } catch (error) {
                        console.error('Error fetching system status:', error);
                        this.systemStatus = { status: 'error', error: error.message };
                    }
                },

                async refreshStats() {
                    try {
                        const response = await fetch(`${this.baseUrl}/stats`);
                        this.stats = await response.json();
                    } catch (error) {
                        console.error('Error fetching stats:', error);
                        this.stats = {};
                    }
                },

                async refreshMemories() {
                    try {
                        const response = await fetch(`${this.baseUrl}/memory?limit=50`);
                        const data = await response.json();
                        this.memories = data.memories || [];
                        this.filterMemories();
                    } catch (error) {
                        console.error('Error fetching memories:', error);
                        this.memories = [];
                    }
                },

                filterMemories() {
                    this.filteredMemories = this.memories.filter(memory => {
                        const matchesSearch = !this.searchQuery || 
                            memory.topic.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                            memory.input?.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                            memory.output?.toLowerCase().includes(this.searchQuery.toLowerCase());
                        
                        const matchesType = !this.filterType || memory.type === this.filterType;
                        const matchesCategory = !this.filterCategory || memory.category === this.filterCategory;
                        const matchesSuccess = !this.filterSuccess || memory.success.toString() === this.filterSuccess;
                        
                        return matchesSearch && matchesType && matchesCategory && matchesSuccess;
                    });
                },

                async addMemory() {
                    if (!this.apiKey) {
                        alert('Please set your API key in Settings first');
                        return;
                    }

                    try {
                        const response = await fetch(`${this.baseUrl}/memory`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-API-KEY': this.apiKey
                            },
                            body: JSON.stringify(this.newMemory)
                        });

                        if (response.ok) {
                            this.showAddMemory = false;
                            this.newMemory = {
                                topic: '',
                                type: '',
                                category: '',
                                input: '',
                                output: '',
                                success: true
                            };
                            await this.refreshMemories();
                            await this.refreshStats();
                        } else {
                            const error = await response.json();
                            alert(`Error: ${error.error}`);
                        }
                    } catch (error) {
                        alert(`Error: ${error.message}`);
                    }
                },

                async testEndpoint(endpoint) {
                    try {
                        const response = await fetch(`${this.baseUrl}${endpoint}`);
                        const data = await response.json();
                        this.apiTestResult = JSON.stringify(data, null, 2);
                    } catch (error) {
                        this.apiTestResult = `Error: ${error.message}`;
                    }
                },

                async testPostMemory() {
                    try {
                        const response = await fetch(`${this.baseUrl}/memory`, {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                                'X-API-KEY': this.testApiKey
                            },
                            body: this.testPayload
                        });

                        const data = await response.json();
                        this.apiTestResult = JSON.stringify(data, null, 2);
                        this.showApiTest = false;
                        
                        if (response.ok) {
                            await this.refreshMemories();
                            await this.refreshStats();
                        }
                    } catch (error) {
                        this.apiTestResult = `Error: ${error.message}`;
                    }
                },

                formatDate(timestamp) {
                    if (!timestamp) return 'Unknown';
                    try {
                        return new Date(timestamp).toLocaleString();
                    } catch {
                        return timestamp;
                    }
                },

                exportData() {
                    const data = {
                        systemStatus: this.systemStatus,
                        stats: this.stats,
                        memories: this.memories,
                        exportedAt: new Date().toISOString()
                    };
                    
                    const blob = new Blob([JSON.stringify(data, null, 2)], { type: 'application/json' });
                    const url = URL.createObjectURL(blob);
                    const a = document.createElement('a');
                    a.href = url;
                    a.download = `memoryos-export-${new Date().toISOString().split('T')[0]}.json`;
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    URL.revokeObjectURL(url);
                },

                clearCache() {
                    if (confirm('Are you sure you want to clear the cache? This will refresh all data.')) {
                        this.systemStatus = {};
                        this.stats = {};
                        this.memories = [];
                        this.filteredMemories = [];
                        this.refreshData();
                    }
                }
            }
        }
    </script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MemoryOS - AI Co-Founder</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        /* Premium Dark Theme - Inspired by Modern Dashboards */
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #111117;
            --bg-card: #1a1a24;
            --bg-card-hover: #212130;
            --accent-blue: #3b82f6;
            --accent-blue-bright: #60a5fa;
            --accent-cyan: #06b6d4;
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --border-primary: #2d2d3a;
            --border-accent: #3b82f6;
            --success: #10b981;
            --warning: #f59e0b;
            --error: #ef4444;
            --glow-blue: rgba(59, 130, 246, 0.3);
            --glow-cyan: rgba(6, 182, 212, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
            overflow-x: hidden;
        }

        /* Background Effects */
        .bg-gradient {
            background: radial-gradient(ellipse at top, rgba(59, 130, 246, 0.1) 0%, transparent 70%),
                        radial-gradient(ellipse at bottom, rgba(6, 182, 212, 0.1) 0%, transparent 70%);
        }

        /* Navigation */
        .nav {
            background: rgba(26, 26, 36, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid var(--border-primary);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .nav-content {
            max-width: 1400px;
            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem 2rem;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 0.75rem;
            font-size: 1.5rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .logo-icon {
            width: 40px;
            height: 40px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            box-shadow: 0 4px 20px var(--glow-blue);
        }

        .nav-links {
            display: flex;
            gap: 0.5rem;
            list-style: none;
        }

        .nav-link {
            cursor: pointer;
            padding: 0.75rem 1.25rem;
            border-radius: 12px;
            transition: all 0.3s ease;
            font-weight: 500;
            color: var(--text-secondary);
        }

        .nav-link:hover {
            background: var(--bg-card);
            color: var(--text-primary);
            transform: translateY(-1px);
        }

        .nav-link.active {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            color: white;
            box-shadow: 0 4px 20px var(--glow-blue);
        }

        /* Container */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 2rem;
        }

        /* Main Content */
        .main-content {
            min-height: calc(100vh - 80px);
            padding: 2rem 0;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
        }

        /* Hero Section */
        .hero {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 4rem 3rem;
            text-align: center;
            position: relative;
            overflow: hidden;
            margin-bottom: 3rem;
        }

        .hero::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.1), rgba(6, 182, 212, 0.1));
            border-radius: 24px;
        }

        .hero-content {
            position: relative;
            z-index: 2;
        }

        .hero h1 {
            font-size: 3.5rem;
            margin-bottom: 1.5rem;
            font-weight: 800;
            background: linear-gradient(135deg, var(--text-primary), var(--accent-blue-bright));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .hero p {
            font-size: 1.25rem;
            margin-bottom: 2.5rem;
            color: var(--text-secondary);
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
        }

        .cta-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 1rem 2rem;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            font-size: 1rem;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            color: white;
            box-shadow: 0 8px 32px var(--glow-blue);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 12px 40px var(--glow-blue);
        }

        .btn-secondary {
            background: var(--bg-card);
            color: var(--text-primary);
            border: 1px solid var(--border-primary);
        }

        .btn-secondary:hover {
            background: var(--bg-card-hover);
            border-color: var(--border-accent);
            transform: translateY(-2px);
        }

        /* Stats Dashboard */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 2rem;
            margin-bottom: 3rem;
        }

        .stat-card {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-blue), var(--accent-cyan));
            border-radius: 20px 20px 0 0;
        }

        .stat-card:hover {
            background: var(--bg-card-hover);
            transform: translateY(-4px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
        }

        /* Circular Progress */
        .circular-progress {
            position: relative;
            width: 120px;
            height: 120px;
            margin: 0 auto 1.5rem;
        }

        .circular-progress svg {
            width: 100%;
            height: 100%;
            transform: rotate(-90deg);
        }

        .circular-progress .bg-circle {
            fill: none;
            stroke: var(--border-primary);
            stroke-width: 8;
        }

        .circular-progress .progress-circle {
            fill: none;
            stroke: url(#gradient);
            stroke-width: 8;
            stroke-linecap: round;
            stroke-dasharray: 283;
            transition: stroke-dashoffset 1s ease;
        }

        .progress-text {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 2rem;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-label {
            color: var(--text-secondary);
            font-size: 0.95rem;
            font-weight: 500;
            margin-top: 1rem;
        }

        /* Chat Interface */
        .chat-section {
            background: var(--bg-secondary);
            border-radius: 24px;
            overflow: hidden;
            border: 1px solid var(--border-primary);
        }

        .chat-header {
            background: var(--bg-card);
            padding: 1.5rem 2rem;
            border-bottom: 1px solid var(--border-primary);
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .chat-header-icon {
            width: 48px;
            height: 48px;
            border-radius: 12px;
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
        }

        .chat-header-info h3 {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.25rem;
        }

        .chat-header-info p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .chat-layout {
            display: grid;
            grid-template-columns: 1fr 350px;
            min-height: 600px;
        }

        .chat-main {
            display: flex;
            flex-direction: column;
            height: 600px;
        }

        .chat-messages {
            flex: 1;
            padding: 2rem;
            overflow-y: auto;
            max-height: 500px;
        }

        .chat-message {
            margin-bottom: 1.5rem;
            animation: slideInMessage 0.4s ease-out;
        }

        .message-bubble {
            max-width: 80%;
            padding: 1rem 1.5rem;
            border-radius: 16px;
            position: relative;
        }

        .message-bubble.user {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            color: white;
            margin-left: auto;
            border-bottom-right-radius: 4px;
        }

        .message-bubble.ai {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            margin-right: auto;
            border-bottom-left-radius: 4px;
        }

        .message-bubble.system {
            background: rgba(245, 158, 11, 0.1);
            border: 1px solid var(--warning);
            color: var(--warning);
            margin: 0 auto;
            text-align: center;
            font-size: 0.9rem;
        }

        .chat-input-container {
            padding: 1.5rem 2rem;
            background: var(--bg-card);
            border-top: 1px solid var(--border-primary);
        }

        .chat-input {
            display: flex;
            gap: 1rem;
            align-items: center;
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 0.75rem 1.5rem;
            transition: all 0.3s ease;
        }

        .chat-input:focus-within {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px var(--glow-blue);
        }

        .chat-input input {
            flex: 1;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 1rem;
            outline: none;
        }

        .chat-input input::placeholder {
            color: var(--text-muted);
        }

        .chat-send-btn {
            background: linear-gradient(135deg, var(--accent-blue), var(--accent-cyan));
            border: none;
            border-radius: 12px;
            padding: 0.75rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .chat-send-btn:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 25px var(--glow-blue);
        }

        .chat-send-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Insights Panel */
        .insights-panel {
            background: var(--bg-card);
            border-left: 1px solid var(--border-primary);
            padding: 2rem;
            overflow-y: auto;
        }

        .insights-header {
            margin-bottom: 2rem;
        }

        .insights-header h4 {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 0.5rem;
        }

        .insights-header p {
            color: var(--text-secondary);
            font-size: 0.9rem;
        }

        .insight-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            transition: all 0.3s ease;
        }

        .insight-card:hover {
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        .insight-title {
            font-weight: 600;
            color: var(--accent-blue-bright);
            margin-bottom: 0.75rem;
            font-size: 0.9rem;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .insight-content {
            color: var(--text-secondary);
            font-size: 0.85rem;
            line-height: 1.5;
        }

        .insight-metric {
            background: rgba(59, 130, 246, 0.1);
            color: var(--accent-blue-bright);
            padding: 0.4rem 0.8rem;
            border-radius: 8px;
            font-weight: 500;
            display: inline-block;
            margin: 0.25rem 0.25rem 0.25rem 0;
            font-size: 0.8rem;
            border: 1px solid rgba(59, 130, 246, 0.2);
        }

        /* Memory Browser */
        .memory-browser {
            background: var(--bg-secondary);
            border-radius: 24px;
            padding: 2rem;
            border: 1px solid var(--border-primary);
        }

        .memory-header {
            margin-bottom: 2rem;
        }

        .memory-header h2 {
            font-size: 2rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }

        .memory-filters {
            display: flex;
            gap: 1rem;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .filter-input {
            padding: 0.75rem 1rem;
            border: 1px solid var(--border-primary);
            border-radius: 12px;
            background: var(--bg-card);
            color: var(--text-primary);
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .filter-input:focus {
            border-color: var(--accent-blue);
            box-shadow: 0 0 0 3px var(--glow-blue);
            outline: none;
        }

        .memory-item {
            background: var(--bg-card);
            border: 1px solid var(--border-primary);
            border-radius: 16px;
            padding: 1.5rem;
            margin-bottom: 1rem;
            transition: all 0.3s ease;
        }

        .memory-item:hover {
            background: var(--bg-card-hover);
            border-color: var(--accent-blue);
            transform: translateY(-2px);
        }

        /* Status Indicators */
        .status-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .status-healthy {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
            border: 1px solid var(--success);
        }

        .status-degraded {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
            border: 1px solid var(--warning);
        }

        .status-error {
            background: rgba(239, 68, 68, 0.1);
            color: var(--error);
            border: 1px solid var(--error);
        }

        /* Loading Animation */
        .loading {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 2px solid var(--border-primary);
            border-radius: 50%;
            border-top-color: var(--accent-blue);
            animation: spin 1s ease-in-out infinite;
        }

        /* Animations */
        @keyframes slideInMessage {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 1024px) {
            .chat-layout {
                grid-template-columns: 1fr;
            }
            
            .insights-panel {
                border-left: none;
                border-top: 1px solid var(--border-primary);
            }

            .nav-content {
                flex-direction: column;
                gap: 1rem;
                padding: 1rem;
            }

            .hero h1 {
                font-size: 2.5rem;
            }

            .stats-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 640px) {
            .container {
                padding: 0 1rem;
            }

            .hero {
                padding: 2rem 1.5rem;
            }

            .hero h1 {
                font-size: 2rem;
            }

            .cta-buttons {
                flex-direction: column;
                align-items: center;
            }

            .memory-filters {
                flex-direction: column;
            }
        }
    </style>
</head>
<body x-data="memoryOS()" x-init="init()" class="bg-gradient">
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav-content">
            <div class="logo">
                <div class="logo-icon">M</div>
                <span>MemoryOS</span>
            </div>
            <ul class="nav-links">
                <li class="nav-link" :class="{ active: activeSection === 'home' }" @click="setActiveSection('home')">Dashboard</li>
                <li class="nav-link" :class="{ active: activeSection === 'chat' }" @click="setActiveSection('chat')">AI Co-Founder</li>
                <li class="nav-link" :class="{ active: activeSection === 'memory' }" @click="setActiveSection('memory')">Memory</li>
                <li class="nav-link" :class="{ active: activeSection === 'analytics' }" @click="setActiveSection('analytics')">Analytics</li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main-content">
        <div class="container">
            <!-- Dashboard Section -->
            <section class="section" :class="{ active: activeSection === 'home' }">
                <div class="hero">
                    <div class="hero-content">
                        <h1>AI Co-Founder</h1>
                        <p>Your persistent AI partner for deep work, creative projects, and intelligent automation. Building the future, together.</p>
                        <div class="cta-buttons">
                            <button class="btn btn-primary" @click="setActiveSection('chat')">
                                <span>🚀</span> Start Building
                            </button>
                            <button class="btn btn-secondary" @click="showOnboarding = true">
                                <span>📚</span> Learn More
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Performance Stats -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="circular-progress">
                            <svg>
                                <defs>
                                    <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#3b82f6;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#06b6d4;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <circle class="bg-circle" cx="60" cy="60" r="45"></circle>
                                <circle class="progress-circle" cx="60" cy="60" r="45" 
                                        :style="`stroke-dashoffset: ${283 - (283 * efficiencyScore / 100)}`"></circle>
                            </svg>
                            <div class="progress-text" x-text="efficiencyScore + '%'">85%</div>
                        </div>
                        <div class="stat-label">Efficiency Score</div>
                    </div>

                    <div class="stat-card">
                        <div class="circular-progress">
                            <svg>
                                <circle class="bg-circle" cx="60" cy="60" r="45"></circle>
                                <circle class="progress-circle" cx="60" cy="60" r="45" 
                                        :style="`stroke-dashoffset: ${283 - (283 * (parseInt(successRate) || 0) / 100)}`"></circle>
                            </svg>
                            <div class="progress-text" x-text="successRate">0%</div>
                        </div>
                        <div class="stat-label">Success Rate</div>
                    </div>

                    <div class="stat-card">
                        <div class="circular-progress">
                            <svg>
                                <circle class="bg-circle" cx="60" cy="60" r="45"></circle>
                                <circle class="progress-circle" cx="60" cy="60" r="45" 
                                        :style="`stroke-dashoffset: ${283 - (283 * Math.min(totalMemories / 100, 1))}`"></circle>
                            </svg>
                            <div class="progress-text" x-text="totalMemories">0</div>
                        </div>
                        <div class="stat-label">Total Memories</div>
                    </div>

                    <div class="stat-card">
                        <div style="padding: 2rem 0;">
                            <div class="status-indicator" :class="systemStatus === 'healthy' ? 'status-healthy' : 'status-error'">
                                <span x-text="systemStatus">checking...</span>
                            </div>
                        </div>
                        <div class="stat-label">System Status</div>
                    </div>
                </div>
            </section>

            <!-- AI Chat Section -->
            <section class="section" :class="{ active: activeSection === 'chat' }">
                <div class="chat-section">
                    <div class="chat-header">
                        <div class="chat-header-icon">🤝</div>
                        <div class="chat-header-info">
                            <h3>AI Co-Founder Chat</h3>
                            <p>Your persistent AI partner with <span x-text="totalMemories"></span> memories</p>
                        </div>
                    </div>

                    <div class="chat-layout">
                        <div class="chat-main">
                            <div class="chat-messages" x-ref="chatMessages">
                                <template x-for="message in chatHistory" :key="message.id">
                                    <div class="chat-message">
                                        <div class="message-bubble" :class="message.type" x-html="message.content"></div>
                                    </div>
                                </template>
                            </div>

                            <div class="chat-input-container">
                                <div class="chat-input">
                                    <input 
                                        x-model="currentMessage" 
                                        @keydown.enter="sendMessage()"
                                        :disabled="isTyping"
                                        placeholder="What are we building today? I have insights from your memories..."
                                        autofocus
                                    >
                                    <button 
                                        class="chat-send-btn" 
                                        @click="sendMessage()" 
                                        :disabled="isTyping || !currentMessage.trim()"
                                    >
                                        <span x-show="!isTyping">→</span>
                                        <div x-show="isTyping" class="loading"></div>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <div class="insights-panel">
                            <div class="insights-header">
                                <h4>Live Insights</h4>
                                <p>Real-time analysis of your progress</p>
                            </div>

                            <div class="insight-card">
                                <div class="insight-title">
                                    <span>🎯</span> Current Learning
                                </div>
                                <div class="insight-content" x-text="currentLearnings">
                                    Analyzing your patterns...
                                </div>
                            </div>

                            <div class="insight-card">
                                <div class="insight-title">
                                    <span>🚧</span> Active Blockers
                                </div>
                                <div class="insight-content">
                                    <div x-show="blockers.length === 0" class="insight-metric">No blockers detected</div>
                                    <template x-for="blocker in blockers">
                                        <div class="insight-metric" x-text="blocker"></div>
                                    </template>
                                </div>
                            </div>

                            <div class="insight-card">
                                <div class="insight-title">
                                    <span>⚡</span> Efficiency Boosts
                                </div>
                                <div class="insight-content">
                                    <template x-for="boost in efficiencyBoosts">
                                        <div class="insight-metric" x-text="boost"></div>
                                    </template>
                                </div>
                            </div>

                            <div class="insight-card">
                                <div class="insight-title">
                                    <span>📊</span> Session Metrics
                                </div>
                                <div class="insight-content">
                                    <div class="insight-metric">Sessions: <span x-text="totalSessions"></span></div>
                                    <div class="insight-metric">Categories: <span x-text="Object.keys(categories).length"></span></div>
                                    <div class="insight-metric">Provider: <span x-text="aiProvider"></span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Memory Browser Section -->
            <section class="section" :class="{ active: activeSection === 'memory' }">
                <div class="memory-browser">
                    <div class="memory-header">
                        <h2>Memory Archive</h2>
                        <p style="color: var(--text-secondary);">Browse and search through your creative journey</p>
                    </div>

                    <div class="memory-filters">
                        <input class="filter-input" placeholder="Search memories..." x-model="memorySearch">
                        <select class="filter-input" x-model="selectedCategory">
                            <option value="">All Categories</option>
                            <template x-for="(count, category) in categories" :key="category">
                                <option :value="category" x-text="`${category} (${count})`"></option>
                            </template>
                        </select>
                    </div>

                    <div class="memory-list">
                        <template x-for="memory in filteredMemories" :key="memory.timestamp">
                            <div class="memory-item">
                                <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 1rem;">
                                    <div style="font-weight: 600; color: var(--text-primary);" x-text="memory.topic"></div>
                                    <div style="color: var(--text-secondary); font-size: 0.875rem;" x-text="formatTimestamp(memory.timestamp)"></div>
                                </div>
                                <div style="margin: 1rem 0; color: var(--text-secondary);" x-text="memory.input.substring(0, 200) + '...'"></div>
                                <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                                    <template x-for="tag in memory.tags || []">
                                        <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;" x-text="tag"></span>
                                    </template>
                                    <span style="background: var(--bg-secondary); color: var(--text-primary); padding: 0.25rem 0.5rem; border-radius: 4px; font-size: 0.75rem;" x-text="memory.category"></span>
                                </div>
                            </div>
                        </template>
                    </div>
                </div>
            </section>

            <!-- Analytics Section -->
            <section class="section" :class="{ active: activeSection === 'analytics' }">
                <div class="memory-browser">
                    <div class="memory-header">
                        <h2>Creative Analytics</h2>
                        <p style="color: var(--text-secondary);">Deep insights into your AI collaboration patterns</p>
                    </div>

                    <div class="stats-grid">
                        <div class="stat-card">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue); margin-bottom: 0.5rem;" x-text="Object.keys(categories).length">0</div>
                            <div class="stat-label">Active Categories</div>
                        </div>
                        <div class="stat-card">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-cyan); margin-bottom: 0.5rem;" x-text="aiProvider">Unknown</div>
                            <div class="stat-label">AI Provider</div>
                        </div>
                        <div class="stat-card">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--accent-blue-bright); margin-bottom: 0.5rem;" x-text="sessionId.substring(0, 8)">--------</div>
                            <div class="stat-label">Session ID</div>
                        </div>
                        <div class="stat-card">
                            <div style="font-size: 2.5rem; font-weight: 700; color: var(--success); margin-bottom: 0.5rem;" x-text="recentMemories.length">0</div>
                            <div class="stat-label">Recent Entries</div>
                        </div>
                    </div>

                    <div style="margin-top: 3rem;">
                        <h3 style="margin-bottom: 1.5rem; color: var(--text-primary);">Category Breakdown</h3>
                        <div>
                            <template x-for="(count, category) in categories" :key="category">
                                <div style="display: flex; justify-content: space-between; padding: 1rem; margin-bottom: 0.5rem; background: var(--bg-card); border-radius: 12px; border: 1px solid var(--border-primary);">
                                    <span style="color: var(--text-primary);" x-text="category"></span>
                                    <span style="color: var(--accent-blue);" x-text="count"></span>
                                </div>
                            </template>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <script>
        function memoryOS() {
            return {
                // State
                activeSection: 'home',
                showOnboarding: false,

                // Chat
                currentMessage: '',
                chatHistory: [],
                isTyping: false,

                // System
                systemStatus: 'checking...',
                totalMemories: 0,
                totalSessions: 0,
                successRate: '0%',
                recentMemories: [],
                categories: {},
                aiProvider: 'Claude AI',
                sessionId: '',
                efficiencyScore: 85,

                // Insights
                currentLearnings: 'Analyzing your memory patterns to identify key learnings...',
                blockers: [],
                efficiencyBoosts: ['Memory Context', 'Pattern Recognition', 'Auto-Insights'],

                // Memory browsing
                memorySearch: '',
                selectedCategory: '',

                // Initialize
                async init() {
                    await this.loadSystemStatus();
                    await this.refreshMemories();
                    this.addWelcomeMessage();
                    this.startLiveInsights();
                },

                // Navigation
                setActiveSection(section) {
                    this.activeSection = section;
                    if (section === 'memory') {
                        this.refreshMemories();
                    } else if (section === 'chat') {
                        this.updateCofounderInsights();
                        this.scrollToBottom();
                    }
                },

                // System Status
                async loadSystemStatus() {
                    try {
                        const [healthResponse, contextResponse] = await Promise.all([
                            fetch('/health'),
                            fetch('/ai/context').catch(() => null)
                        ]);

                        const health = await healthResponse.json();
                        this.systemStatus = health.status || 'unknown';

                        if (contextResponse && contextResponse.ok) {
                            const context = await contextResponse.json();
                            this.aiProvider = context.ai_provider || 'Claude AI';
                            this.sessionId = context.session_id || '';
                        }
                    } catch (error) {
                        this.systemStatus = 'error';
                        console.error('Failed to load system status:', error);
                    }
                },

                // Memory Management
                async refreshMemories() {
                    try {
                        const [memoriesResponse, statsResponse] = await Promise.all([
                            fetch('/memory?limit=50'),
                            fetch('/stats')
                        ]);

                        const memories = await memoriesResponse.json();
                        const stats = await statsResponse.json();

                        this.recentMemories = memories.memories || [];
                        this.totalMemories = stats.total_memories || 0;
                        this.successRate = stats.success_rate || '0%';
                        this.categories = stats.categories || {};
                        this.totalSessions = this.countUniqueSessions();
                        
                        this.updateCofounderInsights();
                    } catch (error) {
                        console.error('Failed to refresh memories:', error);
                    }
                },

                // Insights
                updateCofounderInsights() {
                    const learnings = this.extractLearnings();
                    this.currentLearnings = learnings.length > 0 ? learnings.join(', ') : 'Building baseline understanding...';
                    this.blockers = this.identifyBlockers();
                    this.efficiencyScore = this.calculateEfficiencyScore();
                    this.efficiencyBoosts = this.getEfficiencyBoosts();
                },

                extractLearnings() {
                    const successfulMemories = this.recentMemories.filter(m => m.success);
                    const learnings = [];
                    
                    successfulMemories.slice(-5).forEach(memory => {
                        if (memory.topic && memory.topic.length < 50) {
                            learnings.push(memory.topic);
                        }
                    });
                    
                    return learnings;
                },

                identifyBlockers() {
                    const failedMemories = this.recentMemories.filter(m => !m.success);
                    const blockers = [];
                    
                    if (failedMemories.length > 2) {
                        blockers.push('Multiple Failures');
                    }
                    if (this.recentMemories.length < 5) {
                        blockers.push('Low Activity');
                    }
                    
                    return blockers;
                },

                calculateEfficiencyScore() {
                    const total = this.totalMemories;
                    const successCount = this.recentMemories.filter(m => m.success).length;
                    const categoryCount = Object.keys(this.categories).length;
                    
                    if (total === 0) return 75;
                    
                    const successRatio = successCount / Math.min(total, 20);
                    const diversityBonus = Math.min(categoryCount * 5, 25);
                    const activityBonus = Math.min(total * 2, 20);
                    
                    return Math.min(Math.round((successRatio * 50) + diversityBonus + activityBonus), 100);
                },

                getEfficiencyBoosts() {
                    const boosts = ['Memory Context', 'Pattern Recognition'];
                    
                    if (this.totalMemories > 10) boosts.push('Rich History');
                    if (Object.keys(this.categories).length > 3) boosts.push('Category Diversity');
                    if (this.efficiencyScore > 80) boosts.push('High Performance');
                    
                    return boosts;
                },

                countUniqueSessions() {
                    const sessions = new Set();
                    this.recentMemories.forEach(memory => {
                        if (memory.session_id) sessions.add(memory.session_id);
                    });
                    return sessions.size || 1;
                },

                startLiveInsights() {
                    setInterval(() => {
                        this.updateCofounderInsights();
                    }, 30000);
                },

                // Chat Functions
                addWelcomeMessage() {
                    this.chatHistory.push({
                        id: Date.now(),
                        type: 'ai',
                        content: `<strong>🚀 AI Co-Founder Online</strong><br><br>
                        Status: <span style="color: var(--accent-blue);">${this.systemStatus}</span> | 
                        Memories: <span style="color: var(--accent-cyan);">${this.totalMemories}</span> | 
                        Efficiency: <span style="color: var(--success);">${this.efficiencyScore}%</span><br><br>
                        Hey! I'm your AI co-founder with access to ${this.totalMemories} memories. I can see patterns in your work, identify blockers, and suggest optimizations.<br><br>
                        <em>What are we working on today?</em>`
                    });
                    this.scrollToBottom();
                },

                async sendMessage() {
                    if (!this.currentMessage.trim() || this.isTyping) return;

                    const userMessage = this.currentMessage.trim();
                    this.chatHistory.push({
                        id: Date.now(),
                        type: 'user',
                        content: userMessage
                    });

                    this.currentMessage = '';
                    this.isTyping = true;
                    this.scrollToBottom();

                    try {
                        const response = await fetch('/ai/query', {
                            method: 'POST',
                            headers: { 'Content-Type': 'application/json' },
                            body: JSON.stringify({ input: userMessage })
                        });

                        const result = await response.json();

                        if (result.status === 'success') {
                            this.chatHistory.push({
                                id: Date.now() + 1,
                                type: 'ai',
                                content: result.ai_response.response || 'No response received'
                            });

                            setTimeout(() => {
                                this.addCofounderInsight(userMessage, result.ai_response.response);
                            }, 1000);
                        } else {
                            this.chatHistory.push({
                                id: Date.now() + 1,
                                type: 'system',
                                content: `Error: ${result.error || 'Unknown error occurred'}`
                            });
                        }
                    } catch (error) {
                        this.chatHistory.push({
                            id: Date.now() + 1,
                            type: 'system',
                            content: `Connection error: ${error.message}`
                        });
                    } finally {
                        this.isTyping = false;
                        this.scrollToBottom();
                        this.refreshMemories();
                    }
                },

                addCofounderInsight(userInput, aiResponse) {
                    const insights = [
                        `💡 This adds to your <strong>${this.getMostActiveCategory()}</strong> knowledge base`,
                        `📊 Your success rate in this area: <strong>${this.successRate}</strong>`,
                        `⚡ This interaction improved your efficiency score to <strong>${this.efficiencyScore}%</strong>`,
                        `🎯 Consider exploring: <strong>${this.suggestNextStep()}</strong>`
                    ];

                    const randomInsight = insights[Math.floor(Math.random() * insights.length)];
                    
                    this.chatHistory.push({
                        id: Date.now() + 2,
                        type: 'ai',
                        content: `<small style="color: var(--text-secondary);">${randomInsight}</small>`
                    });
                    this.scrollToBottom();
                },

                getMostActiveCategory() {
                    const categories = this.categories;
                    let maxCategory = 'general';
                    let maxCount = 0;
                    
                    Object.entries(categories).forEach(([cat, count]) => {
                        if (count > maxCount) {
                            maxCount = count;
                            maxCategory = cat;
                        }
                    });
                    
                    return maxCategory;
                },

                suggestNextStep() {
                    const suggestions = [
                        'API integration patterns',
                        'scaling your current approach',
                        'automating repetitive tasks',
                        'improving error handling',
                        'adding monitoring capabilities'
                    ];
                    return suggestions[Math.floor(Math.random() * suggestions.length)];
                },

                scrollToBottom() {
                    this.$nextTick(() => {
                        if (this.$refs.chatMessages) {
                            this.$refs.chatMessages.scrollTop = this.$refs.chatMessages.scrollHeight;
                        }
                    });
                },

                // Utility Functions
                formatTimestamp(timestamp) {
                    return new Date(timestamp).toLocaleDateString('en-US', {
                        month: 'short',
                        day: 'numeric',
                        hour: '2-digit',
                        minute: '2-digit'
                    });
                },

                // Computed Properties
                get filteredMemories() {
                    let filtered = this.recentMemories;

                    if (this.memorySearch) {
                        const search = this.memorySearch.toLowerCase();
                        filtered = filtered.filter(memory => 
                            memory.topic?.toLowerCase().includes(search) ||
                            memory.input?.toLowerCase().includes(search) ||
                            memory.output?.toLowerCase().includes(search)
                        );
                    }

                    if (this.selectedCategory) {
                        filtered = filtered.filter(memory => 
                            memory.category === this.selectedCategory
                        );
                    }

                    return filtered;
                }
            }
        }
    </script>
</body>
</html>
